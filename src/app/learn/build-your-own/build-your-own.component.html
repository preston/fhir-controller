<div class="container py-5">
    <div class="row">
        <div class="col-12">
            <div class="text-center mb-5">
                <h1 class="display-5 fw-bold mb-3">
                    <i class="bi bi-tools me-3"></i>
                    Build Your Own FHIR Data Distribution Tool
                </h1>
                <p class="lead text-muted">Create custom FHIR data distributions without writing code</p>
            </div>
            
            <div class="row g-5">
                <div class="col-lg-8">
                    <div class="mb-5">
                        <h2 class="h3 mb-4">Distributing Data with a Custom FHIR Controller</h2>
                        <p class="lead mb-4">
                            Learn how to set up and customize FHIR Controller using GitHub and Docker to distribute data and
                            loading tools to your users, without writing any code.
                        </p>
                    </div>

                    <div class="mb-5">
                        <div class="d-flex align-items-start mb-4">
                            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-4 flex-shrink-0" style="width: 50px; height: 50px;">
                                <i class="bi bi-question-circle"></i>
                            </div>
                            <div>
                                <h3 class="h4 mb-3">What is the FHIR Controller?</h3>
                                <p class="mb-3 text-muted">
                                    The FHIR Controller is a great tool that allows users to set up their own FHIR server using your
                                    data without requiring you to provide scripts or initialization code. You put your data files
                                    into your own data-only Docker image that extends our handy precompiled FHIR Controller
                                    application image, add a `stack.json` metadata file, and you're good to go.
                                </p>
                                <p class="text-muted">
                                    Users can then load your FHIR Bundles and CQL into their own FHIR resource servers, and even purging it of
                                    all existing resources (if supported and enabled by the FHIR server). Your `stack.json` file will define the order in which to load the data files, and
                                    optionally different scenarios in which to load them.
                                </p>
                            </div>
                        </div>

                        <div class="alert alert-info">
                            <i class="bi bi-info-circle me-2"></i>
                            <strong>Note:</strong> A FHIR Controller is a client-only web application that runs completely
                            within the browser, with all commands performed via FHIR API calls. FHIR Controller does not have their own backend
                            service; however, the optional <a href="https://github.com/preston/fhir-controller-cli"
                                target="_blank" class="text-decoration-none">FHIR Controller CLI</a> provides a command line interface for headless FHIR
                            Controller functions.
                        </div>
                    </div>

                    <div class="mb-5">
                        <h3 class="h4 mb-4">Getting Started</h3>
                        <div class="row g-4">
                            <div class="col-md-6">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body p-4">
                                        <div class="d-flex align-items-center mb-3">
                                            <div class="bg-success text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                                <i class="bi bi-git"></i>
                                            </div>
                                            <h5 class="mb-0">1. Fork Template</h5>
                                        </div>
                                        <p class="text-muted mb-0">
                                            <strong>Fork</strong> the
                                            <a href="https://github.com/preston/fhir-controller-template" target="_blank" class="text-decoration-none">Custom FHIR Controller Template</a> project.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body p-4">
                                        <div class="d-flex align-items-center mb-3">
                                            <div class="bg-info text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                                <i class="bi bi-folder-plus"></i>
                                            </div>
                                            <h5 class="mb-0">2. Add Data Files</h5>
                                        </div>
                                        <p class="text-muted mb-0">
                                            <strong>Add a Data File Directory</strong> and include any number of FHIR Bundles (.json
                                            only) and CQL files (.cql only) into a project directory.
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body p-4">
                                        <div class="d-flex align-items-center mb-3">
                                            <div class="bg-warning text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                                <i class="bi bi-gear"></i>
                                            </div>
                                            <h5 class="mb-0">3. Customize Config</h5>
                                        </div>
                                        <p class="text-muted mb-0">
                                            <strong>Customize the `stack.json` File</strong> by hand or the UI tool (See below
                                            instructions).
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card h-100 border-0 shadow-sm">
                                    <div class="card-body p-4">
                                        <div class="d-flex align-items-center mb-3">
                                            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-3" style="width: 40px; height: 40px;">
                                                <i class="bi bi-hammer"></i>
                                            </div>
                                            <h5 class="mb-0">4. Build & Test</h5>
                                        </div>
                                        <p class="text-muted mb-0">
                                            <strong>Build and Test</strong> with Docker or other container builder and runtime.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-5">
                        <h3 class="h4 mb-4">Edit Your `stack.json` File</h3>
                        <div class="bg-light rounded p-4 mb-4">
                            <p class="mb-3">
                                Edit the `stack.json` file to define the order in which to load the data files, and optionally
                                different scenarios in which to load them.
                            </p>
                            <p class="mb-3">
                                Scenarios are an optional concept. If you provide them, you can load the data files in different
                                scenarios. For example, you can put a data file into a "full", "light", and the "default"
                                scenario. If scenarios are not provided for a data file, the data file will automatically be
                                included in the "default" scenario _only_. If a data file provides a list of scenarios ids and
                                you want it included in the "default" scenario (_and_ any additional specified scenarios), you
                                must explicitly include the "default" scenario id in the list.
                            </p>
                            <p class="mb-0">
                                You can optionally use the <a href="/configuration" routerLink="/configuration" class="text-decoration-none">configuration</a>
                                page's visual editor for currently-loaded `stack.json` file, as well as the ability to create a
                                new `stack.json` file from scratch.
                            </p>
                        </div>
                    </div>

                    <div class="mb-5">
                        <h3 class="h4 mb-4">Building and Running Your Custom FHIR Controller</h3>
                        <p class="text-muted mb-4">Use the following Docker commands to build and run your FHIR Controller:</p>

                        <h4 class="h5 mb-3">Building Your Image via Docker</h4>
                        <p class="text-muted mb-4">If using Docker Desktop, you can use the following commands to build your custom FHIR Controller.
                            We do not require Docker Desktop, and any OCI compliant builder should work fine.</p>
                        
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <div class="card border-0 shadow-sm">
                                    <div class="card-header bg-dark text-white">
                                        <h6 class="mb-0">For yourself</h6>
                                    </div>
                                    <div class="card-body">
                                        <pre class="mb-0"><code>docker build -t yourname/my-fhir-controller:latest .</code></pre>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card border-0 shadow-sm">
                                    <div class="card-header bg-dark text-white">
                                        <h6 class="mb-0">Multi-architecture builds</h6>
                                    </div>
                                    <div class="card-body">
                                        <pre class="mb-0"><code>docker buildx build --platform linux/amd64,linux/arm64 -t yourname/my-fhir-controller:latest</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <h4 class="h5 mb-3">Running Your Image</h4>
                        <p class="text-muted mb-3">Run your image using the following command. This will assign it to port 4200:</p>
                        <div class="card border-0 shadow-sm mb-4">
                            <div class="card-body">
                                <pre class="mb-0"><code>docker run -d -p 4200:80 yourname/my-fhir-controller:latest</code></pre>
                            </div>
                        </div>

                        <p class="mb-4">
                            You now have your own FHIR Controller running on port 4200 at
                            <a href="http://localhost:4200" target="_blank" class="text-decoration-none">http://localhost:4200</a>!
                        </p>

                        <div class="alert alert-success">
                            <i class="bi bi-check-circle me-2"></i>
                            <strong>Success!</strong> As long as you have your FHIR server running at the location specified
                            in your `stack.json` file, you can interact with it using the FHIR Controller you've just created.
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <div class="sticky-top" style="top: 2rem;">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-primary text-white">
                                <h5 class="mb-0">
                                    <i class="bi bi-lightning me-2"></i>
                                    Quick Reference
                                </h5>
                            </div>
                            <div class="card-body p-4">
                                <p class="text-muted mb-4">Essential commands and links:</p>
                                <div class="d-grid gap-3">
                                    <a href="https://github.com/preston/fhir-controller-template" target="_blank"
                                        class="btn btn-outline-primary">
                                        <i class="bi bi-github me-2"></i>
                                        Template Project Source Code
                                    </a>
                                    <a href="https://github.com/preston/fhir-controller" target="_blank"
                                        class="btn btn-outline-primary">
                                        <i class="bi bi-github me-2"></i>
                                        FHIR Controller Source Code
                                    </a>
                                    <a href="https://chat.fhir.org/#narrow/channel/179166-implementers" target="_blank"
                                        class="btn btn-outline-info">
                                        <i class="bi bi-chat-dots me-2"></i>
                                        FHIR Implementers Chat
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>